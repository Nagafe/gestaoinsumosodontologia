{% extends 'base.html' %}

{% block title %}Novo Funcionário{% endblock %}

{% block content %}
<div class="card shadow mb-4" style="max-width: 900px; margin: 0 auto;">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">
            <i class="fas fa-user-plus mr-2"></i>Cadastrar Novo Funcionário
        </h6>
    </div>
    <div class="card-body">
        
        <!-- Exibe mensagens de erro (ex: CPF duplicado) -->
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show">
                    {{ message }}
                    <button type="button" class="close" data-dismiss="alert"><span>&times;</span></button>
                </div>
            {% endfor %}
        {% endif %}

        <form method="POST">
            {% csrf_token %}
            
            <h6 class="text-secondary mb-3 border-bottom pb-2">Dados Pessoais</h6>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label>Nome Completo *</label>
                    <input type="text" class="form-control" name="nome" required>
                </div>
                <div class="form-group col-md-3">
                    <label>CPF *</label>
                    <input type="text" class="form-control" name="cpf" placeholder="000.000.000-00" required>
                </div>
                <div class="form-group col-md-3">
                    <label>Data Nascimento *</label>
                    <input type="date" class="form-control" name="data_nascimento" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group col-md-3">
                    <label>Sexo *</label>
                    <select class="form-control" name="sexo" required>
                        <option value="M">Masculino</option>
                        <option value="F">Feminino</option>
                    </select>
                </div>
                <div class="form-group col-md-4">
                    <label>Telefone *</label>
                    <input type="text" class="form-control" name="fone" placeholder="(XX) 9XXXX-XXXX" required>
                </div>
                <div class="form-group col-md-5">
                    <label>Local de Nascimento</label>
                    <input type="text" class="form-control" name="local_nascimento">
                </div>
            </div>

            <div class="form-group">
                <label>Endereço Completo</label>
                <input type="text" class="form-control" name="endereco">
            </div>

            <h6 class="text-secondary mb-3 border-bottom pb-2 mt-4">Dados de Acesso e Sistema</h6>

            <div class="form-row">
                <div class="form-group col-md-6">
                    <label>Email (Login) *</label>
                    <input type="email" class="form-control" name="email" required>
                </div>
                <div class="form-group col-md-6">
                    <label>Senha Inicial *</label>
                    <input type="password" class="form-control" name="senha" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group col-md-6">
                    <label>Cargo *</label>
                    <input type="text" class="form-control" name="cargo" placeholder="Ex: Recepcionista" required>
                </div>
                <div class="form-group col-md-6">
                    <label>Permissão de Acesso</label>
                    <select class="form-control" name="tipo_usuario">
                        <option value="PADRAO">Padrão (Operacional)</option>
                        <option value="ADMIN">Administrador (Acesso Total)</option>
                    </select>
                </div>
            </div>

            <div class="form-group form-check mt-2 p-3 bg-light rounded border">
                <input type="checkbox" class="form-check-input" id="ativoCheck" name="ativo" checked>
                <label class="form-check-label font-weight-bold ml-2" for="ativoCheck">
                    Cadastro Ativo
                </label>
                <small class="d-block text-muted ml-4">Se desmarcado, o funcionário não conseguirá fazer login.</small>
            </div>

            <div class="mt-4 text-right">
                <a href="{% url 'listar_funcionarios' %}" class="btn btn-secondary">
                    <i class="fas fa-times mr-1"></i> Cancelar
                </a>
                <button type="submit" class="btn btn-success px-4">
                    <i class="fas fa-save mr-1"></i> Salvar Cadastro
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}